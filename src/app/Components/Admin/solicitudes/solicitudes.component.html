<!--<section class="container mx-auto p-4">-->
<!--  <h2 class="text-2xl font-bold text-center text-gray-300 mb-6">Solicitudes</h2>-->

<!--  @if (CitaActual !== null) {-->
<!--    <button (click)="CerrarAsignarTecnicos()">Volver</button>-->
<!--    <app-asignar-tecnicos [cita]="CitaActual"></app-asignar-tecnicos>-->
<!--  } @else {-->
<!--    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">-->
<!--      @for (solicitud of Solicitudes; track $index) {-->
<!--        <div class="bg-gray-900 text-white p-6 rounded-xl shadow-lg">-->
<!--          <h3 class="text-xl font-bold">{{ solicitud.Servicios.Nombre }}</h3>-->
<!--          <p class="text-gray-400">Cliente: <span class="font-semibold">{{ solicitud.Usuarios.Nombre }}</span></p>-->
<!--          <p class="text-gray-400">Fecha: <span class="font-semibold">{{ solicitud.Fecha }}</span></p>-->
<!--          @if (solicitud.Estado === EstadoSolicitud.Pendiente) {-->
<!--            <div class="flex justify-between items-center mt-4">-->
<!--              <button (click)="Aceptar(solicitud.id)"-->
<!--                      class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg">Aceptar-->
<!--              </button>-->
<!--              <button (click)="Rechazar(solicitud.id)"-->
<!--                      class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg">Rechazar-->
<!--              </button>-->
<!--            </div>-->
<!--          } @else {-->
<!--            Estado Solicitud : {{ solicitud.Estado }}-->
<!--            @if (solicitud.Estado === EstadoSolicitud.Aceptada) {-->
<!--              <button (click)="AsignarTecnicos(solicitud.id)">Asignar Tecnicos</button>-->
<!--            }-->
<!--          }-->
<!--        </div>-->
<!--      } @empty {-->
<!--        <h2 class="text-green-300"> Sin solicitudes</h2>-->
<!--      }-->


<!--    </div>-->
<!--  }-->
<!--</section>-->

<section class="container mx-auto p-6">
  <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">Solicitudes</h2>

  <!-- Mostrar asignación de técnicos si hay una cita activa -->
  @if (CitaActual !== null) {
    <div>
      <button (click)="CerrarAsignarTecnicos()"
              class="bg-gray-700 hover:bg-gray-800 text-white px-4 py-2 rounded-lg shadow-md transition">
        Volver
      </button>
      <app-asignar-tecnicos [cita]="CitaActual" (cambios)="cambiosEnTecnicos($event)" ></app-asignar-tecnicos>
    </div>
  }

  <!-- Mostrar lista de solicitudes -->
  @if (CitaActual === null) {
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      @for (solicitud of Solicitudes; track solicitud.id) {
        <div class="bg-white text-gray-800 p-6 rounded-xl shadow-md border border-gray-200">
          <h3 class="text-xl font-bold mb-2">{{ solicitud.Servicios.Nombre }}</h3>
          <p class="text-gray-600">Cliente: <span class="font-semibold">{{ solicitud.Usuarios.Nombre }}</span></p>
          <p class="text-gray-600">Fecha: <span class="font-semibold">{{ solicitud.Fecha | date: 'longDate' }}</span>
          </p>
          <div class="mt-4 flex items-center">

            <span [ngClass]="{
                  'bg-green-500': solicitud.Estado ===  EstadoSolicitud.Aceptada,
                  'bg-orange-300': solicitud.Estado === EstadoSolicitud.Pendiente,
                  'bg-red-500': solicitud.Estado === EstadoSolicitud.Rechazada
                }" class="w-3 h-3 rounded-full mr-2">
            </span>
            {{ solicitud.Estado }}
          </div>
          <!-- Si la solicitud está pendiente -->
          @if (solicitud.Estado === 'Pendiente') {
            <div class="flex justify-between items-center mt-4">
              <button (click)="Aceptar(solicitud.id)"
                      class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg shadow-md transition">
                Aceptar
              </button>
              <button (click)="Rechazar(solicitud.id)"
                      class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg shadow-md transition">
                Rechazar
              </button>
            </div>
          } @else {
            <div>
              @if (solicitud.Estado === 'Aceptada') {
                <button (click)="AsignarTecnicos(solicitud.id)"
                        class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 mt-2 rounded-lg shadow-md transition">
                  Asignar Técnicos
                </button>
              }
            </div>
          }
        </div>
      }

      <!-- Si no hay solicitudes -->
      @if (Solicitudes.length === 0) {
        <div class="col-span-full text-center">
          <h2 class="text-green-600">No hay solicitudes disponibles</h2>
        </div>
      }
    </div>
  }
</section>


